<launch>

    <arg name="project" default="lio_sam"/>

    <env name="ROSCONSOLE_CONFIG_FILE" value="$(find lio_sam)/launch/include/rosconsole/rosconsole_error.conf"/>
    
    <!-- EKF GPS-->
    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_gps" respawn="false" output="screen">
        <remap from="odometry/filtered" to="/odometry/navsat" />
        <param name="odom0" value="/odom"/>
        <param name="imu0" value="/synced/imu/data"/>
        <param name="print_diagnostics" value="true"/>
        <!--param name="publish_tf" value="true"/-->
    </node>

    <!-- Navsat -->
    <node pkg="robot_localization" type="navsat_transform_node" name="navsat" respawn="false" output="screen">
        <rosparam param="datum">[59.375608, 16.5025311, 0.0, odom, base_link]</rosparam>
        <remap from="imu/data" to="/synced/imu/data" />
        <remap from="gps/fix" to="/fix/latched" />
        <remap from="odometry/filtered" to="/odometry/navsat" />
        <param name="wait_for_datum" value="false" />
        <param name="use_odometry_yaw" value="false" />
        <param name="magnetic_declination_radians" value="0.10471975512" /> <!-- 6*pi/180 from https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml-->


    </node>

</launch>
